{"version":3,"sources":["../../src/components/Histoslider.js"],"names":["histosliderStyle","position","backgroundColor","border","Histoslider","state","dragging","setState","extent","props","data","startMinimum","scale","start","Math","max","end","selectedScale","base","domain","range","clamp","selection","selectionSorted","Object","assign","paddingTop","padding","showOnDrag","height","dragChange","bind","propTypes","arrayOf","number","isRequired","onChange","func","selectionColor","string","bucketSize","histogramHeight","histogramPadding","bool","style","object","barBorderRadius","selectionFormat","sliderPrefix","defaultProps"],"mappings":"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","file":"Histoslider.js","sourcesContent":["import React, { Component, PropTypes } from 'react'\nimport { extent as e } from 'd3-array'\nimport { scaleLog, scaleLinear } from 'd3-scale'\n\nimport Histogram from './Histogram'\nimport Slider from './Slider'\n\nconst histosliderStyle = {\n  position: 'relative',\n  backgroundColor: '#fafafa',\n  border: '1px solid #eaeaea'\n}\n\nexport default class Histoslider extends Component {\n\n  constructor () {\n    super()\n    this.state = {\n      dragging: false\n    }\n  }\n\n  dragChange (dragging) {\n    this.setState({ dragging })\n  }\n\n  render () {\n    const extent = e(this.props.data)\n\n    const startMinimum = this.props.scale == 'linear' ? 0 : 1;\n    const start = Math.max(startMinimum, this.props.start || extent[0])\n    const end = this.props.end || extent[1]\n\n    const selectedScale = {\n      'linear': scaleLinear(),\n      'log': scaleLog().base(1.7),\n    }[this.props.scale];\n    const scale = selectedScale\n      .domain([start, end])\n      .range([0, 100])\n      .clamp(true)\n    let selection = this.props.selection ? this.props.selection : [start, end]\n    const selectionSorted = e(selection)\n\n    // TODO: selection layer\n    return (\n      <div style={Object.assign(histosliderStyle, { paddingTop: this.props.padding })} className='Histoslider Histoslider-wrapper'>\n\n        {\n          !this.props.showOnDrag || this.state.dragging\n          ? <Histogram\n            {...Object.assign(\n            {},\n            this.props,\n              {\n                start,\n                end,\n                extent,\n                selection: selectionSorted,\n                scale,\n                height: this.props.height - 40\n              }\n          )\n          } />\n          : null\n        }\n\n        <Slider {...Object.assign({}, this.props, { start, end, dragChange: this.dragChange.bind(this), extent, selection, selectionSorted, scale, height: 50 })} />\n      </div>\n    )\n  }\n}\n\nHistoslider.propTypes = {\n  data: PropTypes.arrayOf(PropTypes.number).isRequired,\n  onChange: PropTypes.func.isRequired,\n  start: PropTypes.number,\n  end: PropTypes.number,\n  selectionColor: PropTypes.string,\n  bucketSize: PropTypes.number,\n  padding: PropTypes.number,\n  selection: PropTypes.arrayOf(PropTypes.number),\n  histogramHeight: PropTypes.number,\n  histogramPadding: PropTypes.number,\n  height: PropTypes.number,\n  showOnDrag: PropTypes.bool,\n  style: PropTypes.object,\n  barBorderRadius: PropTypes.number,\n  selectionFormat: PropTypes.string,\n  scale: PropTypes.string,\n  sliderPrefix: PropTypes.string,\n}\n\nHistoslider.defaultProps = {\n  bucketSize: 1,\n  selectionColor: '#2ecc71',\n  showOnDrag: false,\n  histogramPadding: 4,\n  padding: 20,\n  height: 200,\n  barBorderRadius: 0,\n  style: {\n    border: '1px solid red'\n  },\n  selectionFormat: ',d',\n  scale: 'linear',\n  sliderPrefix: '',\n}\n"]}