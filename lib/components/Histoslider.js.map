{"version":3,"sources":["../../src/components/Histoslider.js"],"names":["histosliderStyle","position","backgroundColor","border","Histoslider","state","dragging","setState","props","onChange","extent","data","startMinimum","scale","start","Math","max","end","innerWidth","width","padding","selectedScale","base","domain","range","clamp","selection","selectionSorted","Object","assign","paddingTop","showOnDrag","reset","bind","height","dragChange","propTypes","arrayOf","number","isRequired","func","selectionColor","string","bucketSize","histogramHeight","histogramPadding","bool","style","object","barBorderRadius","selectionFormat","defaultProps"],"mappings":"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","file":"Histoslider.js","sourcesContent":["import React, { Component, PropTypes } from 'react'\nimport { extent as e } from 'd3-array'\nimport { scaleLog, scaleLinear } from 'd3-scale'\n\nimport Histogram from './Histogram'\nimport Slider from './Slider'\n\nconst histosliderStyle = {\n  position: 'relative',\n  backgroundColor: '#fafafa',\n  border: '1px solid #eaeaea'\n}\n\nexport default class Histoslider extends Component {\n\n  constructor () {\n    super()\n    this.state = {\n      dragging: false\n    }\n  }\n\n  dragChange (dragging) {\n    this.setState({ dragging })\n  }\n\n  reset () {\n    this.props.onChange(null)\n  }\n\n  render () {\n    const extent = e(this.props.data)\n\n    const startMinimum = this.props.scale == 'linear' ? 0 : 1;\n    const start = Math.max(startMinimum, this.props.start || extent[0])\n    const end = this.props.end || extent[1]\n\n    const innerWidth = this.props.width - (this.props.padding * 2)\n\n    const selectedScale = {\n      'linear': scaleLinear(),\n      'log': scaleLog().base(1.7),\n    }[this.props.scale];\n    const scale = selectedScale\n      .domain([start, end])\n      .range([this.props.padding, innerWidth + this.props.padding])\n      .clamp(true)\n    let selection = this.props.selection ? this.props.selection : [start, end]\n    const selectionSorted = e(selection)\n\n    // TODO: selection layer\n    return (\n      <div style={Object.assign(histosliderStyle, { width: this.props.width, paddingTop: this.props.padding })} className='Histoslider Histoslider-wrapper'>\n\n        {\n          !this.props.showOnDrag || this.state.dragging\n          ? <Histogram\n            {...Object.assign(\n            {},\n            this.props,\n              {\n                start,\n                end,\n                reset: this.reset.bind(this),\n                extent,\n                selection: selectionSorted,\n                innerWidth,\n                scale,\n                height: this.props.height - 40\n              }\n          )\n          } />\n          : null\n        }\n\n        <Slider {...Object.assign({}, this.props, { start, end, dragChange: this.dragChange.bind(this), reset: this.reset.bind(this), extent, selection, selectionSorted, scale, innerWidth, height: 50 })} />\n      </div>\n    )\n  }\n}\n\nHistoslider.propTypes = {\n  data: PropTypes.arrayOf(PropTypes.number).isRequired,\n  onChange: PropTypes.func.isRequired,\n  start: PropTypes.number,\n  end: PropTypes.number,\n  selectionColor: PropTypes.string,\n  bucketSize: PropTypes.number,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  padding: PropTypes.number,\n  selection: PropTypes.arrayOf(PropTypes.number),\n  histogramHeight: PropTypes.number,\n  histogramPadding: PropTypes.number,\n  showOnDrag: PropTypes.bool,\n  style: PropTypes.object,\n  barBorderRadius: PropTypes.number,\n  selectionFormat: PropTypes.string,\n  scale: PropTypes.string,\n}\n\nHistoslider.defaultProps = {\n  bucketSize: 1,\n  selectionColor: '#2ecc71',\n  showOnDrag: false,\n  histogramPadding: 4,\n  padding: 20,\n  width: 400,\n  height: 200,\n  barBorderRadius: 0,\n  style: {\n    border: '1px solid red'\n  },\n  selectionFormat: ',d',\n  scale: 'linear',\n}\n"]}